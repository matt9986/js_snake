(()=>{"use strict";var t=function(t,e){var n=null;return t.map((function(t){var r=null==n?function(t,e){return[e[0]+t[0],e[1]+t[1]]}(e,t):n;return n=t,r}))},e=function(t){var e=t.length;return function n(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return Array.prototype.push.apply(i,a),(i.length>=e?t:n).apply(null,i)}}()};var n=function(t,e){return[i(t),i(e)]},r=function(t,e){return t[0]==e[0]&&t[1]==e[1]},i=function(t){return Math.floor(Math.random()*t)},a=[function(e){return t(e,[0,1])},function(e){return t(e,[-1,0])},function(e){return t(e,[0,-1])},function(e){return t(e,[1,0])}],o=100;function s(t){"37"==t.last_key&&(t.current_move_index=t.current_move_index==a.length-1?0:t.current_move_index+1),"39"==t.last_key&&(t.current_move_index=0==t.current_move_index?a.length-1:t.current_move_index-1),t.last_key=null,t.snake=a[t.current_move_index](t.snake);var i,c=t.snake[0];return r(c,t.apple)&&(t.snake.push(function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(i=t.snake.slice(-1)[0])||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),t.apple=n(t.max_x,t.max_y)),c[0]<0||c[0]>=t.max_x||c[1]<0||c[1]>=t.max_y||t.snake.slice(1).some(e(r)(c))?function(t){t.display.lost(t),document.onkeydown=function(e){u(t.display)}}(t):(t.display.render(t),void setTimeout(s,o,t))}function u(t){var e={apple:n(t.max_x(),t.max_y()),current_move_index:0,display:t,max_x:t.max_x(),max_y:t.max_y(),last_key:null,snake:[]};document.onkeydown=function(t){document.onkeydown=function(t){return e.last_key=t.keyCode},s(e)};var r=Math.floor(e.max_y/2),i=Math.floor(e.max_x/2);e.snake=[[i,r],[i,r],[i,r],[i,r]],t.render(e)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}u(new(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e.getContext("2d"),this.size=10,this.border_size=2,this.snake_color="black"}var e,n;return e=t,(n=[{key:"render",value:function(t){var e=this;this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.lineWidth=this.border_size,this.ctx.strokeStyle="gray",this.ctx.strokeRect(0,0,this.max_x()*this.size,this.max_y()*this.size),this.draw_square(t.apple,"red"),t.snake.map((function(t){return e.draw_square(t,e.snake_color)}))}},{key:"lost",value:function(t){this.ctx.font="11px 'Arial Unicode MS'",this.ctx.fillText("ðŸ’€",this.game_to_x_coord(t.snake[1][0]),this.game_to_y_coord(t.snake[1][1])+this.size-1)}},{key:"max_x",value:function(){return(this.ctx.canvas.width-this.size)/this.size}},{key:"max_y",value:function(){return(this.ctx.canvas.height-this.size)/this.size}},{key:"draw_square",value:function(t,e){this.ctx.fillStyle=e,this.ctx.fillRect(this.game_to_x_coord(t[0]),this.game_to_y_coord(t[1]),this.size,this.size)}},{key:"game_to_x_coord",value:function(t){return this.game_to_display_dimension(t)}},{key:"game_to_y_coord",value:function(t){return this.game_to_display_dimension(this.max_y()-t)-this.size}},{key:"game_to_display_dimension",value:function(t){return t*this.size}}])&&c(e.prototype,n),t}())(document.getElementById("snake-game-target")))})();